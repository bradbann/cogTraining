<!DOCTYPE html>
<html lang="zh-CN">
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<!-- 上述3个meta标签*必须*放在最前面，任何其他内容都*必须*跟随其后！ -->
	<title>认知训练平台</title>

	<!-- Bootstrap -->
	<link href="${basePath}/assets/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" type="text/css" href="${basePath}/assets/css/signin.css">
  <link rel="stylesheet" type="text/css" href="${basePath}/assets/css/bootstrap-datetimepicker.min.css">
</head>
<body style="background-color: #eee">
  <nav class="navbar navbar-default" id="navbar">
    <div class="container-fluid" id="navbar-content">
     <!-- Brand and toggle get grouped for better mobile display -->
      <div class="navbar-header">
        <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
         <span class="sr-only">Toggle navigation</span>
         <span class="icon-bar"></span>
         <span class="icon-bar"></span>
         <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="${basePath!}/index" id="navbar-brand-text">CogTraining</a>
      </div>

   <!-- Collect the nav links, forms, and other content for toggling -->
      <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">

        <form class="navbar-form navbar-right">
         <span>已经有账户？</span>
         <a type="submit" class="btn btn-inverse btn-cog" id="btn-login" href="${basePath!}/login">登录</a>
        </form>

      </div><!-- /.navbar-collapse -->
    </div><!-- /.container-fluid -->
  </nav>

<div class="alert alert-danger alert-dismissible hidden" role="alert" id="alert">
  <button type="button" class="close" data-dismiss="alert" aria-label="Close">
    <span aria-hidden="true">&times;</span>
  </button>
  <strong>该邮箱已占用！</strong>
</div>

<!--main content-->
<div id="main-content">
  <div class="signin-box">
    <div class="container" id="signin-form">

      <div class="panel panel-default">
      <div class="panel-body span6">
        <h1 class="signin-form-brand">创建一个账户</h1>

        <ul class="nav nav-tabs tab-choose">
          <li class="tab-choose-item tab-choose-item-email col-xs-6 active ">
            <a href="#panel-622629" data-toggle="tab">邮箱注册</a>
          </li>
          <li class="tab-choose-item tab-choose-item-mobile col-xs-6">
            <a href="#panel-90171" data-toggle="tab">手机注册</a>
          </li>
        </ul>

        <div class="tabbable" id="tabs-935293">
          <div class="tab-content">
            <div class="tab-pane active" id="panel-622629">
              <form class="form-group col-xs-12" id="defaultForm" action="${basePath!}/register/save" 
              method="post">

                <div class="form-group"> 
                  <div class="input-group" data-toggle="popover" data-trigger="focus" data-content="仅允许中文、英文、数字和下划线，不能为空" id="name_hint" data-placement="top">
                    <div class="input-group-addon">
                      <span class="glyphicon glyphicon-user" aria-hidden="true"></span>
                    </div>
                    <input type="text" class="form-control middle-input" placeholder="请输入姓名"onblur="checkname()" id="name" value="" name="userName">
                    <div class="input-group-addon">
                      <span class="glyphicon glyphicon-ok opacity_0" aria-hidden="true" id="hint_1"></span>
                    </div>
                  </div>
                </div>

                <div class="form-group">
                  <div class="input-group" data-toggle="popover" data-trigger="focus" data-content="请输入正确的邮箱，如example@example.com，不能为空" id="email_hint" data-placement="top">
                    <div class="input-group-addon">
                      <span class="glyphicon glyphicon-envelope" aria-hidden="true"></span>
                    </div>
                    <input type="email" name="email" class="form-control middle-input" placeholder="请输入邮箱" onblur="checkemail()" id="email" value="" name="email">
                    <div class="input-group-addon">
                      <span class="glyphicon glyphicon-ok opacity_0" aria-hidden="true" id="hint_2"></span>
                    </div>
                  </div> 
                </div>

                <div class="form-group">
                  <div class="input-group" data-toggle="popover" data-trigger="focus" data-content="以字母开头，长度在6~18之间，只能包含字母、数字和下划线" id="password_hint" data-placement="top">
                    <div class="input-group-addon">
                      <span class="glyphicon glyphicon-lock" aria-hidden="true"></span>
                    </div>
                    <input type="password" name="password" class="form-control middle-input" placeholder="请输入密码" onblur="checkpassword()" id="password" value="" name="password">
                    <div class="input-group-addon">
                      <span class="glyphicon glyphicon-ok opacity_0" aria-hidden="true" id="hint_3"></span>
                    </div>
                  </div>
                </div>

                <div class="form-group">
                  <div class="input-group date form_date" data-date="" data-date-format="yyyy年mm月dd日" data-link-field="dtp_input2" data-link-format="yyyy-mm-dd">
                    <div class="input-group-addon">
                      <span class="glyphicon glyphicon-calendar"></span>
                    </div>
                    <input class="form-control middle-input" size="16" type="text" value="" readonly placeholder="请输入生日" id="date" onchange="checkdate()">
                    <div class="input-group-addon">
                      <span class="glyphicon glyphicon-ok opacity_0" aria-hidden="true" id="hint_4"></span>
                    </div>
                  </div>
                  <input class="hidden" type="hidden" id="dtp_input2" value="" name="date" /><br/>
                </div>

                <div class="form-group">
                  <div class="input-group">
                    <div class="col-xs-12">
                      <div class="checkbox">

                        <div class="col-xs-1">
                          <label>
                            <input type="checkbox" name="agreed" onchange='check_all_right()' value="" id="agreed"> 
                          </label>
                        </div>
                        <div class="col-xs-11">
                            通过注册，我同意
                            <o data-toggle="modal" data-target="#myModal" onclick="show_content(1)">服务条款</o> ,
                            <o data-toggle="modal" data-target="#myModal" onclick="show_content(2)">隐私政策</o> 和
                            <o data-toggle="modal" data-target="#myModal" onclick="show_content(3)">缓存政策</o> 。我明确我想要注册一个免费账户，而且接收关于cogTraining产品的邮件，并且随时都可以退订这些邮件。
                        </div>
                        <!--<o data-toggle="modal" data-target="#myModal" onclick="show_content(1)">服务条款</o>-->
                      </div>
                    </div>
                  </div>
                </div>

                <div class="form-group">
                  <button class="btn btn-cog btn-primary btn-block" type="submit" id="submit" disabled="">注册</button>  
                </div>

              </form>
            </div>

            <div class="tab-pane" id="panel-90171">
                <form class="form-group col-xs-12" id="defaultForm-1" action="${basePath!}/register/save" 
                  method="post">

                  <div class="form-group"> 
                    <div class="input-group" data-toggle="popover" data-trigger="focus" data-content="仅允许中文、英文、数字和下划线，不能为空" id="name_hint-1" data-placement="top">
                      <div class="input-group-addon">
                        <span class="glyphicon glyphicon-user" aria-hidden="true"></span>
                      </div>
                      <input type="text" class="form-control middle-input" placeholder="请输入姓名"onblur="checkname_1()" id="name-1" name="userName" value="">
                      <div class="input-group-addon">
                        <span class="glyphicon glyphicon-ok opacity_0" aria-hidden="true" id="hint_1-1"></span>
                      </div>
                    </div>
                  </div>

                  <div class="form-group">
                    <div class="input-group" data-toggle="popover" data-trigger="focus" data-content="请输入正确的11位手机号，不能为空" id="mobile_hint" data-placement="top">
                      <div class="input-group-addon">
                        <span class="glyphicon glyphicon-earphone" aria-hidden="true"></span>
                      </div>
                      <input class="form-control middle-input" placeholder="请输入手机号" onblur="checkmobile()" id="mobile" name="phone" value="">
                      <div class="input-group-addon">
                        <span class="glyphicon glyphicon-ok opacity_0" aria-hidden="true" id="hint_2-1"></span>
                      </div>
                    </div> 
                  </div>

                  <div class="form-group">
                    <div class="input-group" data-toggle="popover" data-trigger="focus" data-content="以字母开头，长度在6~18之间，只能包含字母、数字和下划线" id="password_hint-1" data-placement="top">
                      <div class="input-group-addon">
                        <span class="glyphicon glyphicon-lock" aria-hidden="true"></span>
                      </div>
                      <input type="password" name="password" class="form-control middle-input" placeholder="请输入密码" onblur="checkpassword_1()" id="password-1" value="">
                      <div class="input-group-addon">
                        <span class="glyphicon glyphicon-ok opacity_0" aria-hidden="true" id="hint_3-1"></span>
                      </div>
                    </div>
                  </div>

                  <div class="form-group">
                    <div class="input-group date form_date" data-date="" data-date-format="yyyy年mm月dd日" data-link-field="dtp_input2-1" data-link-format="yyyy-mm-dd">
                      <div class="input-group-addon">
                        <span class="glyphicon glyphicon-calendar"></span>
                      </div>
                      <input class="form-control middle-input" size="16" type="text" value="" readonly placeholder="请输入生日" id="date-1" onchange="checkdate_1()" >
                      <div class="input-group-addon">
                        <span class="glyphicon glyphicon-ok opacity_0" aria-hidden="true" id="hint_4-1"></span>
                      </div>
                    </div>
                    <input class="hidden" type="hidden" id="dtp_input2-1" value="" name="date" /><br/>
                  </div>   

                  <div class="form-group">
                    <div class="input-group">
                      <div class="col-xs-12">
                        <div class="checkbox">

                          <div class="col-xs-1">
                            <label>
                              <input type="checkbox" name="agreed" onchange='check_all_right_1()' value="" id="agreed-1"> 
                            </label>
                          </div>
                          <div class="col-xs-11">
                            通过注册，我同意
                            <o data-toggle="modal" data-target="#myModal" onclick="show_content(1)">服务条款</o> ,
                            <o data-toggle="modal" data-target="#myModal" onclick="show_content(2)">隐私政策</o> 和
                            <o data-toggle="modal" data-target="#myModal" onclick="show_content(3)">缓存政策</o> 。我明确我想要注册一个免费账户，而且接收关于cogTraining产品的邮件，并且随时都可以退订这些邮件。
                          </div>

                        </div>
                      </div>
                    </div>            
                  </div>
                  <div class="form-group">
                    <button class="btn btn-cog btn-primary btn-block" type="submit" id="submit-1" 
                    disabled="">注册</button>  
                  </div>
                </form>
            </div>
          </div>
        </div>
        <!-- Modal -->
        <div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
          <div class="modal-dialog" role="document">

            <div class="modal-content" id="content_1">
              <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                <h4 class="modal-title" id="myModalLabel">服务条款</h4>
              </div>
              <div class="modal-body">
                <#include "/common/service.html">
              </div>
              <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">关闭</button>
              </div>
            </div>

            <div class="modal-content" id="content_2">
              <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                <h4 class="modal-title" id="myModalLabel">隐私政策</h4>
              </div>
              <div class="modal-body">
                <h5>CogTraining尊重并保护所有使用服务用户的个人隐私权。为了给您提供更准确、更有个性化的服务，CogTraining会按照本隐私权政策的规定使用和披露您的个人信息。但CogTraining将以高度的勤勉、审慎义务对待这些信息。除本隐私权政策另有规定外，在未征得您事先许可的情况下，CogTraining不会将这些信息对外披露或向第三方提供。CogTraining会不时更新本隐私权政策。您在同意CogTraining服务使用协议之时，即视为您已经同意本隐私权政策全部内容。本隐私权政策属于CogTraining服务使用协议不可分割的一部分。</h5>
                      <h4>1.适用范围</h4>
                      <h5>a)在您注册CogTraining帐号时，您根据CogTraining要求提供的个人注册信息；</h5>
                      <h5>b)在您使用CogTraining网络服务，或访问CogTraining平台网页时，CogTraining自动接收并记录的您的浏览器和计算机上的信息，包括但不限于您的IP地址、浏览器的类型、使用的语言、访问日期和时间、软硬件特征信息及您需求的网页记录等数据；</h5>
                      <h5>c)CogTraining通过合法途径从商业伙伴处取得的用户个人数据。</h5> 
                      <h5>您了解并同意，以下信息不适用本隐私权政策：</h5>
                      <h5>a)您在使用CogTraining平台提供的搜索服务时输入的关键字信息；</h5>
                      <h5>b)CogTraining收集到的您在CogTraining发布的有关信息数据，包括但不限于参与活动、成交信息及评价详情；</h5>
                      <h5>c)违反法律规定或违反CogTraining规则行为及CogTraining已对您采取的措施。</h5>
                      <h4>2.信息使用</h4>
                      <h5>a)CogTraining不会向任何无关第三方提供、出售、出租、分享或交易您的个人信息，除非事先得到您的许可，或该第三方和CogTraining（含CogTraining关联公司）单独或共同为您提供服务，且在该服务结束后，其将被禁止访问包括其以前能够访问的所有这些资料。</h5>
                      <h5>b)CogTraining亦不允许任何第三方以任何手段收集、编辑、出售或者无偿传播您的个人信息。任何CogTraining平台用户如从事上述活动，一经发现，CogTraining有权立即终止与该用户的服务协议。</h5>
                      <h5>c) 为服务用户的目的，CogTraining可能通过使用您的个人信息，向您提供您感兴趣的信息，包括但不限于向您发出产品和服务信息，或者与CogTraining合作伙伴共享信息以便他们向您发送有关其产品和服务的信息（后者需要您的事先同意）。</h5>
                      <h4>3.信息披露</h4>
                      <h5>在如下情况下，CogTraining将依据您的个人意愿或法律的规定全部或部分的披露您的个人信息：</h5>
                      <h5>a)经您事先同意，向第三方披露；</h5>
                      <h5>b)为提供您所要求的产品和服务，而必须和第三方分享您的个人信息；</h5>
                      <h5>c)根据法律的有关规定，或者行政或司法机构的要求，向第三方或者行政、司法机构披露； </h5>
                      <h5>d) 如您出现违反中国有关法律、法规或者CogTraining服务协议或相关规则的情况，需要向第三方披露；</h5>
                      <h5>e) 如您是适格的知识产权投诉人并已提起投诉，应被投诉人要求，向被投诉人披露，以便双方处理可能的权利纠纷；</h5>
                      <h5>f) 在CogTraining平台上创建的某一交易中，如交易任何一方履行或部分履行了交易义务并提出信息披露请求的，CogTraining有权决定向该用户提供其交易对方的联络方式等必要信息，以促成交易的完成或纠纷的解决。</h5>
                      <h5>g) 其它CogTraining根据法律、法规或者网站政策认为合适的披露。</h5>
                      <h4>4. 信息存储和交换</h4>
                      <h5>CogTraining收集的有关您的信息和资料将保存在CogTraining及（或）其关联公司的服务器上，这些信息和资料可能传送至您所在国家、地区或CogTraining收集信息和资料所在地的境外并在境外被访问、存储和展示。</h5>
                      <h4>5. 信息安全</h4>
                      <h5>a) CogTraining帐号均有安全保护功能，请妥善保管您的用户名及密码信息。CogTraining将通过对用户密码进行加密等安全措施确保您的信息不丢失，不被滥用和变造。尽管有前述安全措施，但同时也请您注意在信息网络上不存在“完善的安全措施”。 </h5>
                      <h5>b)在使用CogTraining网络服务进行网上交易时，您不可避免的要向交易对方或潜在的交易对方披露自己的个人信息，如联络方式或者邮政地址。请您妥善保护自己的个人信息，仅在必要的情形下向他人提供。如您发现自己的个人信息泄密，尤其是CogTraining用户名及密码发生泄露，请您立即联络CogTraining客服，以便CogTraining采取相应措施。</h5>
              </div>
              <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">关闭</button>
              </div>
            </div>

            <div class="modal-content" id="content_3">
              <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                <h4 class="modal-title" id="myModalLabel">缓存政策</h4>
              </div>
              <div class="modal-body">
                 为了更高效的给用户传达有关认知的信息，那些给我们提供了姓名、地址、邮箱、和其他信息的用户，我们会将此类信息缓存于您的设备（该设备可能包括台式电脑、笔记本电脑、手机或者平板），下次当您重新登陆的时候，我们就可以直接完成登陆，记住您的用户名。我们为了改善网站，会收集您的匿名信息和浏览习惯以及分析网页浏览情况。这些是通过浏览器统计和使用者设备缓存实现的。这些缓存信息不收集任何个人信息，所有的访问者都是匿名。我们绝不泄露这些数据给广告商或合作伙伴的第三方，绝无任何第三方可以使用这些数据，我们也不允许任何第三方在此使用缓存技术。
              </div>
              <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">关闭</button>
              </div>
            </div>
            
          </div>

        </div>
      </div>
      </div>
    </div>
  </div>
<#include "/common/bottom.html">
</div>

<script src="${basePath}/assets/js/jquery.min.js"></script>
<script src="${basePath}/assets/js/bootstrap.min.js"></script>
<script type="text/javascript" src="${basePath}/assets/js/bootstrap-datetimepicker.js" charset="UTF-8"></script>
<script type="text/javascript" src="${basePath}/assets/js/bootstrap-datetimepicker.zh-CN.js" charset="UTF-8"></script>


<script type="text/javascript">
  var ok_1=0;
  var ok_2=0;
  var ok_3=0;
  var ok_4=0;
  var ok_5=0;
  var ok_6=0;
  var ok_7=0;
  var ok_8=0;
  window.onload=function(){
    var s_height=$(window).height();
    var navbar_height=$("#navbar").outerHeight();
    $(".signin-box").css("min-height",s_height-navbar_height-$("#part-6").outerHeight());
    $(".form_date").removeClass("date").removeClass("form_date");
    $('#name_hint').popover();
    $('#name_hint-1').popover();
    $('#email_hint').popover();
    $('#mobile_hint').popover();
    $('#password_hint').popover();
    $('#password_hint-1').popover();
  }
  function show_content (ii) {
    $("#content_1").addClass("hidden");
    $("#content_2").addClass("hidden");
    $("#content_3").addClass("hidden");
    $("#content_"+ii).removeClass("hidden");
  }
  function checkname () {
    var filter_1=/^[\u4E00-\u9FA5A-Za-z0-9_]+$/;
    var tmp=$("#name").val();
    if(filter_1.test(tmp)){
      ok_1=1;
      check_true("#hint_1");
      check_all_right();
    }else{
      ok_1=0;
      check_false("#hint_1");
      check_all_right();
    }
  }
  function checkname_1 () {
    var filter_1=/^[\u4E00-\u9FA5A-Za-z0-9_]+$/;
    var tmp=$("#name-1").val();
    if(filter_1.test(tmp)){
      ok_5=1;
      check_true("#hint_1-1");
      check_all_right_1();
    }else{
      ok_5=0;
      check_false("#hint_1-1");
      check_all_right_1();
    }
  }
  function checkemail () {
    var filter_2=/^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/;
    var tmp=$("#email").val();
    if(filter_2.test(tmp)){
      ok_2=1;
      check_true("#hint_2");
      check_all_right();
    }else{
      ok_2=0;
      check_false("#hint_2");
      check_all_right();
    }
  }
  function checkmobile () {
    var filter_2=/^1[3|4|5|7|8][0-9]{9}$/;
    var tmp=$("#mobile").val();
    if(filter_2.test(tmp)){
      ok_6=1;
      check_true("#hint_2-1");
      check_all_right_1();
    }else{
      ok_6=0;
      check_false("#hint_2-1");
      check_all_right_1();
    }
  }
  function checkpassword () {
    var filter_3=/^[a-zA-Z]\w{5,17}$/;
    var tmp=$("#password").val();
    if(filter_3.test(tmp)){
      ok_3=1;
      check_true("#hint_3");
      check_all_right();
    }else{
      ok_3=0;
      check_false("#hint_3");
      check_all_right();
    }
  }
  function checkpassword_1 () {
    var filter_3=/^[a-zA-Z]\w{5,17}$/;
    var tmp=$("#password-1").val();
    if(filter_3.test(tmp)){
      ok_7=1;
      check_true("#hint_3-1");
      check_all_right_1();
    }else{
      ok_7=0;
      check_false("#hint_3-1");
      check_all_right_1();
    }
  }
  function checkdate () {
    var tmp=$("#date").val();
    var birthday=$("#date").val();
    birthday=Date.parse(birthday);
    var ctime=new Date;
    ctime=ctime.getTime();
    if (ctime<=birthday) {
     ok_4=0;
     check_false("#hint_4");
     check_all_right();
     return;
   }
    if(tmp){
      ok_4=1;
      check_true("#hint_4");
      check_all_right();
    }else{
      ok_4=0;
      check_false("#hint_4");
      check_all_right();
    }
  }
  function checkdate_1 () {
    var tmp=$("#date-1").val();
    var birthday=$("#date-1").val();
    birthday=Date.parse(birthday);
    var ctime=new Date;
    ctime=ctime.getTime();
    if (ctime<=birthday) {
     ok_8=0;
     check_false("#hint_4-1");
     check_all_right_1();
     return;
   }
    if(tmp){
      ok_8=1;
      check_true("#hint_4-1");
      check_all_right_1();
    }else{
      ok_8=0;
      check_false("#hint_4-1");
      check_all_right_1();
    }
  }

  function check_false (str) {
    $(str).removeClass("opacity_0");
    $(str).removeClass("glyphicon-ok");
    $(str).removeClass("glyphicon-remove");
    $(str).addClass("glyphicon-remove");
  }
  
  function check_true (str) {
    $(str).removeClass("opacity_0");
    $(str).removeClass("glyphicon-ok");
    $(str).removeClass("glyphicon-remove");
    $(str).addClass("glyphicon-ok");
  }
  function check_all_right () {
    console.log('check_all_right');
    if (ok_1==1 && ok_2==1 && ok_3==1 && ok_4==1 && document.getElementById("agreed").checked) {
      $("#submit").attr("disabled",false);
    }else{
      $("#submit").attr("disabled",true);
    }
  }
  function check_all_right_1 () {
    console.log('check_all_right');
    if (ok_5==1 && ok_6==1 && ok_7==1 && ok_8==1 && document.getElementById("agreed-1").checked) {
      $("#submit-1").attr("disabled",false);
    }else{
      $("#submit-1").attr("disabled",true);
    }
  }

  $(document).ready(function() {
    var error_msg = "${msg!'noerror'}";
    if (error_msg == "noerror") {
     console.log("noerror");
    } else {
      $("#alert").removeClass('hidden');
      console.log("error");
    }
  });
</script>
<script type="text/javascript">

  $('.form_date').datetimepicker({
    language:  'zh-CN',
    weekStart: 1,
    format:'yyyy-mm-dd',
    todayBtn:  1,
    autoclose: 1,
    todayHighlight: 1,
    startView: 2,
    minView: 2,
    forceParse: 0
  });

</script>
</body>
</html>
